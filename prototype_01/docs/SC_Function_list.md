| #      | Module / Function                          | Inputs                                                                                                        | Outputs                                              | Dependencies                                 | Description                                                                                           |
| ------ | ------------------------------------------ | ------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------- | -------------------------------------------- | ----------------------------------------------------------------------------------------------------- |
| **1**  | **User Authentication Module**             | `email` (string, required), `password` (string, required)                                                     | `token` (JWT string), `status` (bool)                | bcrypt (hash), JWT, MongoDB                  | Handles user registration/login. Verifies credentials, generates JWT token, manages sessions.         |
| **2**  | **Admin Management Module**                | `adminToken` (string, required), `action` (string, required: "reset" / "delete"), `userId` (string, required) | `result` (string: "success"/"error")                 | JWT middleware, MongoDB                      | Allows admin to reset user password or delete accounts. Only accessible to admin role.                |
| **3**  | **Workflow CRUD Module**                   | `userId` (string, required), `workflowData` (object, optional), `workflowId` (string, optional)               | `workflow` (object)                                  | MongoDB                                      | Create, read, update, delete workflows. Stores node list, connections, and metadata.                  |
| **4**  | **Workflow Validator**                     | `workflow` (object, required)                                                                                 | `validationResult` (bool), `errors` (array)          | None                                         | Ensures workflow nodes are valid, all connections map correctly, no loops beyond allowed limit.       |
| **5**  | **Execution Manager**                      | `workflowId` (string, required), `userId` (string, required)                                                  | `executionId` (string), `status` ("running"/"error") | Scheduler, MongoDB, Analytics Logger         | Initializes workflow execution. Creates execution record, invokes Scheduler to process cubes.         |
| **6**  | **Scheduler (In-Memory Queue)**            | `executionId` (string, required), `workflow` (object, required)                                               | `executionResult` (object: status, logs, outputs)    | Node runtime, AI Adapter, Saver Modules      | Sequentially executes cubes by topological order. Stops on error. Manages loop count (max 2).         |
| **7**  | **Cube Executor (Generic)**                | `cube` (object, required), `inputs` (object, required)                                                        | `output` (any), `status` (string)                    | Cube Library (type dispatch), AI Adapter     | Determines cube type and delegates to the respective handler (loader, AI, saver, etc.).               |
| **8**  | **AI Adapter**                             | `prompt` (string, required), `inputs` (object, optional), `cubeType` (string, required)                       | `aiResponse` (string / image / json)                 | axios/fetch, OpenRouter / Azure / Google API | Formats request for current AI provider, sends prompt, receives and parses response. Handles timeout. |
| **9**  | **Anonymization Middleware**               | `inputData` (object/string, required)                                                                         | `cleanData` (object/string)                          | regex / custom tokenization util             | Strips personal data and sensitive terms from user inputs before calling AI APIs.                     |
| **10** | **Loader Cubes (Text, JSON, Image)**       | `sourceData` (any, required)                                                                                  | `output` (text/json/image)                           | fs / file input / user upload                | Provide initial data for workflow. Converts user uploads into internal data representation.           |
| **11** | **Recognition Cubes (Seeing, Hearing)**    | `inputData` (image/audio, required)                                                                           | `output` (text / json)                               | OpenAI Vision API / Whisper / local model    | Converts visual/audio input into structured text or JSON (AI-based recognition).                      |
| **12** | **Math Cube**                              | `expression` (string, required)                                                                               | `result` (number)                                    | math.js                                      | Parses and evaluates a mathematical expression safely (no arbitrary JS eval).                         |
| **13** | **Decider Cube**                           | `input` (any, required), `condition` (string, required)                                                       | `decision` (bool / branch id)                        | Basic parser                                 | Evaluates simple rule (`input > 10` or `text includes keyword`). Directs workflow branch.             |
| **14** | **Text Cube**                              | `prompt` (string, required), `inputs` (text/json, optional)                                                   | `output` (string)                                    | AI Adapter                                   | Sends user prompt (plus optional input text) to AI, retrieves text output.                            |
| **15** | **Image Cube**                             | `prompt` (string, required)                                                                                   | `output` (image blob / URL)                          | AI Adapter                                   | Sends prompt to AI image generation API, retrieves image.                                             |
| **16** | **Saver Cubes (Text, Image, Table, JSON)** | `input` (text/image/table/json, required), `destination` (string, required)                                   | `filePath` (string), `status` (string)               | fs / S3 SDK                                  | Saves data to persistent storage. Fails if data type incompatible.                                    |
| **17** | **Error Handler**                          | `error` (object, required), `executionId` (string, required)                                                  | `status` ("halted"), `logEntry` (object)             | MongoDB, Logger                              | Logs the error, halts the current workflow execution, updates analytics.                              |
| **18** | **Terminal Log Streamer**                  | `executionId` (string, required)                                                                              | `logEvent` (object: time, nodeId, message)           | WebSocket / SSE                              | Streams real-time execution messages and AI outputs to frontend terminal.                             |
| **19** | **Analytics Logger**                       | `eventType` (string, required), `meta` (object, optional), `userId` (string, required)                        | `logId` (string)                                     | MongoDB                                      | Records system usage (workflow starts, node runs, errors, timestamps).                                |
| **20** | **AI Timeout Watchdog**                    | `requestId` (string, required), `timeout` (int, required)                                                     | `status` ("ok" / "timeout")                          | Timer / Node events                          | Monitors ongoing AI calls. Triggers error handler if exceeded.                                        |
| **21** | **Token Manager**                          | `userId` (string, required)                                                                                   | `jwt` (string), `expiry` (datetime)                  | JWT                                          | Generates and validates authentication tokens.                                                        |
| **22** | **Access Control Middleware**              | `token` (string, required), `requiredRole` (string, optional)                                                 | `authorized` (bool)                                  | JWT verifier                                 | Validates user access level for admin endpoints.                                                      |
| **23** | **Loop Controller**                        | `currentIteration` (int, required), `maxIterations` (int, required)                                           | `continue` (bool)                                    | Scheduler                                    | Manages and enforces loop execution limits (2 for MVP).                                               |
| **24** | **Data Type Validator**                    | `input` (any, required), `expectedType` (string, required)                                                    | `valid` (bool)                                       | None                                         | Ensures data type compatibility between cubes (e.g., text â†’ image disallowed).                        |
| **25** | **Output Formatter**                       | `rawOutput` (any, required), `type` (string, required)                                                        | `formattedOutput` (string/object)                    | None                                         | Converts AI or cube outputs into standardized form for next cube.                                     |
